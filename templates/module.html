<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v3.0.6/css/line.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
 
   
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap');

    :root {
        /*========= Variables=======*/
        --header-height: 4.3rem;

        /* ======== Colors ========*/
        --hue-color: 216; /* Purple 250 - Green 142 - Blue 230 - Pink 340 - Light Blue 216 */
        --first-color: hsl(var(--hue-color), 69%, 61%);
        --first-color-second: hsl(var(--hue-color), 69%, 61%);
        --first-color-alt: hsl(var(--hue-color), 57%, 53%);
        --first-color-lighter: hsl(var(--hue-color), 92%, 85%);
        --title-color: hsl(var(--hue-color), 8%, 15%);
        --text-color: hsl(var(--hue-color), 8%, 45%);
        --text-color-light: hsl(var(--hue-color), 8%, 65%);
        --input-color: hsl(var(--hue-color), 70%, 96%);
        --body-color: hsl(var(--hue-color), 60%, 99%);
        --container-color: #ffffff;
        --scroll-bar-color: hsl(var(--hue-color), 12%, 90%);
        --scroll-thumb-color: hsl(var(--hue-color), 12%, 80%);

        --body-font: 'Poppins', sans-serif;

        /*== Font Size ==*/
        --big-font-size: 2rem;
        --h1-font-size: 1.5rem;
        --h2-font-size: 1.25rem;
        --h3-font-size: 1.125rem;
        --normal-font-size: .938rem;
        --small-font-size: .813rem;
        --smaller-font-size: .75rem;

        /*== Font Weight ==*/
        --font-small: 400;
        --font-medium: 500;
        --font-semi-bold: 600;

        /* Margins Bottoms */
        --mb-0-25: .25rem;
        --mb-0-5: .5rem;
        --mb-0-75: .75rem;
        --mb-1: 1rem;
        --mb-1-5: 1.5rem;
        --mb-2: 2rem;
        --mb-2-5: 2.5rem;
        --mb-3: 3rem;

        /*== Z index ==*/
        --z-tooltip: 10;
        --z-fixed: 100;
        --z-model: 1000;
    }

    /*======== Font for large Devices===========*/
    @media screen and (min-width: 968px) {
        :root {
            --big-font-size: 3rem;
            --h1-font-size: 2.25rem;
            --h2-font-size: 1.5rem;
            --h3-font-size: 1.25rem;
            --normal-font-size: 1rem;
            --small-font-size: .875rem;
            --smaller-font-size: .813rem;
        }
    }

    /* ================= Variable Dark theme===================*/
    body.dark-theme {
        --first-color-second: hsl(var(--hue-color), 30%, 8%);
        --title-color: hsl(var(--hue-color), 8%, 95%);
        --text-color: hsl(var(--hue-color), 8%, 75%);
        --input-color: hsl(var(--hue-color), 29%, 16%);
        --body-color: hsl(var(--hue-color), 28%, 12%);
        --container-color: hsl(var(--hue-color), 29%, 16%);
        --scroll-bar-color: hsl(var(--hue-color), 12%, 48%);
        --scroll-thumb-color: hsl(var(--hue-color), 12%, 36%);
    }

    * {
        box-sizing: border-box;
        padding: 0;
        margin: 0;
    }

    html {
        scroll-behavior: smooth;
    }

    /* General Styles */
    body {
        font-family: 'Poppins', sans-serif;
        background-color: rgb(247, 247, 247);
        color: hsl(216, 8%, 45%);
    }

    .module-container {
        display: grid;
        grid-template-columns: 1fr; /* Single column layout for small screens */
        gap: 1rem; /* Gap between grid items */
    }

    .info-section {
        margin-bottom: var(--mb-1);
    }

    .info-title {
        font: var(--body-font);
        font-weight: var(--font-semi-bold);
        font-size: var(--h3-font-size);
        margin-bottom: var(--mb-0-5);
        color: hsl(0, 0%, 33%);
        display: flex;
        align-items: center;
        cursor: pointer;
    }

    .info-details {
        display: none;
        background-color: var(--container-color);
        padding: var(--mb-1);
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .info-section.active .info-details {
        display: block;
    }

    .info-details p {
        margin: var(--mb-0-5) 0;
        color: var(--text-color);
    }

    .info-details h6 {
        margin: 0;
        color: hsl(0, 0%, 23%);
        font-weight: var(--font-medium);
    }

    .info-details a {
        color: var(--first-color);
        text-decoration: none;
    }

    .info-details a:hover {
        text-decoration: underline;
    }

    .info-title::after {
        content: '\f078';
        font-family: 'Font Awesome 5 Free';
        font-weight: 900;
        margin-left: var(--mb-0-5);
        transition: transform 0.3s ease;
    }

    .info-section.active .info-title::after {
        transform: rotate(180deg);
    }

    .header-align-right {
        margin-top: 1rem;
        display: flex;
        justify-content: space-between;  /* Align items to the left and right */
        align-items: center;             /* Vertically align the items */
        width: 100%;                     /* Make sure the header takes full width */
        padding: 10px 0; 
    }

    .header-align-right h3 {
        margin: 0; /* Ensure no extra margin around the heading */
        color: hsl(0, 0%, 33%); /* Adjust the title color */
        font-weight: var(--font-semi-bold);
    }

    .header {
        display: flex;
        justify-content: space-between; /* Distribute space between items */
        align-items: center; /* Vertically center items */
        width: 100%; /* Full width */
    }

    .header i:first-child {
        margin-right: 0.5rem; /* Space between icon and heading */
    }

    .header h4 {
        margin: 0;
    }

    .header i:last-child {
        margin-left: auto; /* Push the last icon to the far right */
    }

    .dropdown-item h6 {
        margin: 0; /* Ensure no extra margin around the heading */
        color: hsl(0, 0%, 23%); /* Adjust the title color */
        font-weight: var(--font-medium);
    }

    .dropdown-item i {
        margin: 0; /* Ensure no extra margin around the heading */
        color: hsl(0, 0%, 64%); /* Adjust the title color */
        font-weight: 400;
    }

    .dropdown-item {
        display: flex;
        align-items: center;
        font-size: 1.15rem;
    }

    .module-item {
        position: relative;
        cursor: pointer;
        background-color: rgb(255, 252, 252);
        margin-bottom: 1rem;
        padding: 1rem;
        border-radius: 10px;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        text-align: left; /* Ensure text inside is left-aligned */
    }

    .module-item .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        background-color: white;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        z-index: var(--z-tooltip);
    }

    /* Button Styles */
    .btn {
        display: inline-block;
        font-size: 0.875rem;
        font-weight: var(--font-semi-bold);
        padding: 0.5rem 1rem;
        border-radius: 5px;
        cursor: pointer;
    }

    .btn-primary {
        background-color: var(--first-color);
        color: white;
    }

    .btn-primary:hover {
        background-color: var(--first-color-alt);
    }

    @media screen and (min-width: 768px) {
        .module-container {
            grid-template-columns: repeat(2, 1fr); /* Two columns layout for medium screens */
        }
    }

    @media screen and (min-width: 992px) {
        .module-container {
            grid-template-columns: repeat(3, 1fr); /* Three columns layout for large screens */
        }
    }
</style>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>Module</title>
  </head>

  <body>
    {% extends "base.html" %}
    {% block content %}
    
    <div class="container">
      <a class="dropdown" href="#"> 
          <h2>
              <i class="uil uil-arrow-left" onclick="goBack()"></i>
          </h2>
      </a>

      {% if current_user.id == module.user_id %}
      <div class="module-item mb-3 shadow-sm p-3 mb-5 bg-white rounded border-white">
        <!-- Module Name -->
        <div class="header">
            <h2>{{ module.Vaal.Module }}</h2>
            <i class="uil uil-ellipsis-v" onclick="toggleDropdown(this, 'module')"></i>
        </div>
        <!-- Module Dropdown Content -->
        <div class="dropdown-content module-dropdown-content" style="display: none;">
          <form method="POST" action="/deletemod/{{ module.id }}" onsubmit="return confirm('Delete Module?')">
            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
          </form>
        </div>
        <br>
        <!-- Lecturer Info -->
        <div class="info-section">
            <h4 class="info-title">Lecturer</h4>
            <div class="info-details">
                <h6>Mr. Smith J.E</h6>
                <h6>Email: <a href="mailto:Smith@gmail.com">Test.Email@gmail.com</a></h6>
                <h6>Building A8</h6>
                <h6>Office No: 210</h6>
                <p>For more information about your Faculty, visit:
                    <a href="https://www.nwu.ac.za/">www.nwu.ac.za</a>
                </p>
            </div>
        </div>

        <!-- Exam Info -->
        <div class="info-section">
            <h4 class="info-title">Assessments</h4>
            <div class="info-details">
                <h5>Exam</h5>
                <h6>Date: {{ module.Vaal.Date }}</h6>
                <h6>Start: {{ module.Vaal.Session }}</h6>
                <h6>Venue: {{ module.Vaal.Venue }}</h6>
                <h6>Students: {{ module.Vaal.Students }}</h6>
            </div>
        </div>
      </div>
        <!-- Add Notes Button -->
        <br/>
        <div class="header-align-right">
          {% if current_user.is_authenticated %}
              <h3>Notes</h3>
          {% endif %}
          <a href="{{ url_for('notesform') }}">
              <button type="submit" class="btn btn-primary" style="font-size: 0.95rem; font-weight: 700;">Notes +</button>
          </a>
        </div>

        <div class="module-container">
          {% if current_user.is_authenticated %}
          {% for note in notes %}
            {% if module.module_id == note.selected_module_id %}
            <div class="module-item mb-3 shadow-sm p-3 mb-5 bg-white rounded border-white">
              <div class="notes-header">
                <i class="uil uil-notes"></i>
                <!--<h4>Note</h4>-->
                <br>
                <i class="uil uil-ellipsis-v" onclick="toggleDropdown(this, 'note')"></i>
              </div>
              <!-- Note Dropdown Content -->
              <div class="dropdown-content note-dropdown-content" style="display: none;">
                <!-- Content specific to notes goes here -->
                <form method="POST" action="/delete_notes/{{ note.id }}" onsubmit="return confirm('Delete Note?')">
                  <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
              </div>

              <a class="dropdown-item" href="{{ url_for('note', id=note.id) }}">            
                  <h6>Title: {{ note.title }}</h6>
                  <i>created: {{ note.date_created.strftime("%d-%m-%Y") }}</i>
              </a>
            </div>
            {% endif %}
          {% endfor %}
          {% endif %}
        </div>
      
      {% endif %}
    </div>

    <script>
      function toggleDropdown(iconElement, type) {
        // Find the closest `.module-item` or `.notes-header` to the icon clicked
        var container;
        if (type === 'module') {
          container = iconElement.closest('.module-item');
        } else if (type === 'note') {
          container = iconElement.closest('.notes-header').parentElement;
        }
        
        // Find the `dropdown-content` inside the container
        var dropdownContent = container.querySelector(`.dropdown-content.${type}-dropdown-content`);
        
        // Toggle the display property to show/hide the dropdown
        if (dropdownContent.style.display === "none" || dropdownContent.style.display === "") {
            dropdownContent.style.display = "block";
        } else {
            dropdownContent.style.display = "none";
        }
      }

      document.addEventListener('DOMContentLoaded', () => {
          const infoTitles = document.querySelectorAll('.info-title');

          infoTitles.forEach(title => {
              title.addEventListener('click', () => {
                  const infoSection = title.parentElement;
                  // Toggle the active class to show/hide the details
                  infoSection.classList.toggle('active');
              });
          });
      });

      function goBack() {
        window.history.back();
      }
    </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    {% endblock %}
  </body>
</html>
